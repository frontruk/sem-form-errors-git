!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/forms"),require("rxjs"),require("rxjs/operators"),require("@angular/core")):"function"==typeof define&&define.amd?define("@frontr/ngformerrors",["exports","@angular/forms","rxjs","rxjs/operators","@angular/core"],t):t((r.frontr=r.frontr||{},r.frontr.ngformerrors={}),r.ng.forms,r.rxjs,r.rxjs.operators,r.ng.core)}(this,function(r,t,e,o,n){"use strict";var i=function(r){return Array.isArray(r)?r:[r]},s=function(){function r(r){this.form=r,this.ready=!1}return Object.defineProperty(r.prototype,"errors",{get:function(){if(this.ready)return this.control.errors},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hasErrors",{get:function(){return!!this.errors},enumerable:!0,configurable:!0}),r.prototype.hasError=function(r,t){return this.checkPropState("invalid",r,t)},r.prototype.isValid=function(r,t){return this.checkPropState("valid",r,t)},r.prototype.getError=function(r){if(this.ready)return this.control.getError(r)},r.prototype.checkPropState=function(r,t,e){var o=this;if(this.ready){var n=!e||i(e).every(function(r){return o.control[r]});return"*"===t.charAt(0)?this.control[r]&&n:"valid"===r?!this.control.hasError(t):this.control.hasError(t)&&n}},r.prototype.checkStatus=function(){var r=this.control,t=r.errors;if(this.ready=!0,t)for(var e in t)this.subject$.next({control:r,errorName:e})},r.prototype.ngOnInit=function(){this.subject$=new e.BehaviorSubject(null)},r.prototype.ngOnChanges=function(){this.control=this.form.control.get(this.controlName)},r.prototype.ngAfterViewInit=function(){var r=this;setTimeout(function(){r.checkStatus(),r.control.statusChanges.subscribe(r.checkStatus.bind(r),function(){return console.log("error")},function(){return console.log("completed")})})},r.prototype.ngOnDestroy=function(){this.subject$.complete()},r.decorators=[{type:n.Directive,args:[{selector:"[ngxErrors]",exportAs:"ngxErrors"}]}],r.ctorParameters=function(){return[{type:t.FormGroupDirective}]},r.propDecorators={controlName:[{type:n.Input,args:["ngxErrors"]}]},r}();function c(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var o,n,i=e.call(r),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(c){n={error:c}}finally{try{o&&!o.done&&(e=i["return"])&&e.call(i)}finally{if(n)throw n.error}}return s}function u(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(c(arguments[t]));return r}var a=function(){function r(r){this.ngxErrors=r,this.hidden=!0,this.rules=[],this.errorNames=[]}return Object.defineProperty(r.prototype,"ngxError",{set:function(r){this.errorNames=i(r)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"when",{set:function(r){this.rules=i(r)},enumerable:!0,configurable:!0}),r.prototype.ngOnInit=function(){var n=this;this._states$=new e.Subject,this.states$=this._states$.asObservable().pipe(o.distinctUntilChanged());var r=this.ngxErrors.subject$.pipe(o.filter(Boolean),o.filter(function(r){return!!~n.errorNames.indexOf(r.errorName)})),t=this.states$.pipe(o.map(function(t){return n.rules.every(function(r){return!!~t.indexOf(r)})}));this.subscription=e.combineLatest(t,r).subscribe(function(r){var t=c(r,2),e=t[0],o=t[1];n.hidden=!(e&&o.control.hasError(o.errorName))})},r.prototype.ngDoCheck=function(){var t=this;this._states$.next(this.rules.filter(function(r){return t.ngxErrors.control[r]}))},r.prototype.ngOnDestroy=function(){this._states$.complete(),this.subscription.unsubscribe()},r.decorators=[{type:n.Directive,args:[{selector:"[ngxError]"}]}],r.ctorParameters=function(){return[{type:s,decorators:[{type:n.Inject,args:[n.forwardRef(function(){return s})]}]}]},r.propDecorators={ngxError:[{type:n.Input}],when:[{type:n.Input}],hidden:[{type:n.HostBinding,args:["hidden"]}]},r}(),f=[s,a],p=function(){function r(){}return r.decorators=[{type:n.NgModule,args:[{declarations:u(f),imports:[],exports:u(f)}]}],r}();r.SemFormErrorsDirective=s,r.SemFormErrorDirective=a,r.SemFormErrorsModule=p,Object.defineProperty(r,"__esModule",{value:!0})});
//# sourceMappingURL=frontr-ngformerrors.umd.min.js.map